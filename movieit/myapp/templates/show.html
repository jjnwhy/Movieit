<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/static/css/rating.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script>
$(function(){
	let current =0;
	  $("div dl").on({
	    "mouseenter":function() {
		  current = $(this).index();
	      $('.rating').eq(current).css({"display":"block"});
	    },
	    "mouseleave":function() {
	    	// 마우스리브 할건데 
	    	//--value의 값이 0이면 - rating.css 의 style --value값에서 input 값 value로 넘어오고 post로 list에 전송.
	    	// display none으로 빼지 않기... 어떻게 하지
			    	$('.rating').eq(current).css({"display":"none"}); 	    		
	    }
	  });
});
</script>

<style>

*{
   font-family: 'Nanum Gothic', sans-serif;
}
.container{
	width:60%;
}

h3, input{
	text-align:center;
}

.row dl{
	width:245px;
	height:400px; 
	position:relative;
	margin-right:10px;
}

/*이미지 액자와 영화 이미지 크기 조절*/
.image-wrap, .image-wrap img{
	width:245px;
	height:343px; 
	
}
/*이미지 액자 */
.image-wrap {
	background:#000;
	overflow:hidden;
}
/*이미지 액자 호버시*/ 
.image-wrap:hover img{
	opacity:0.5;
	transition:0.5s;
	transform:scale(115%);
}
dl dd {
	position:absolute;
	top:35%;
	left:25px;
	transition:0.5s;
	
}

/*사진 위에 레이팅을 올리기 위한 투명 처리 */
.rating{
	background:transparent;
	display:none;
}

</style>
</head>
<body>
<div style="width:auto; margin:20px;">
{% include 'includes/navbar.html' %}

<br>
<br />
<div class="container">
<p><b>아래 영화 중에서 관람하셨던 영화의 평점을 기입해주세요.(0~10점 사이)</b></p>
<br />
<form action="/recommend_movie" method="post">{% csrf_token %}
<table class="table table-borderless">
  <tr>
  	<div class="row">
    {%for i in movie %}
    <dl>
		<dt>
			<div class="image-wrap"> 
	    		<img src="/static/images/Rank{{forloop.counter0}}.png"/>
			</div>
	    	<p class="title" style="height:50px; text-align:center;">{{i}}</p>
		</dt>
		<dd>	    	
			<input
			    class="rating"
			    name="movie{{forloop.counter}}"
			    max="10"
			    oninput="this.style.setProperty('--value', `${this.valueAsNumber}`)"
			    step="1"
			    style="--fill: #C8102E;--symbol:var(--heart);--value:0;"
			    type="range" 
			    value="0">
		</dd>
    </dl>
    {%endfor%}
    </div>
  </tr>
  <tr>
  	<td colspan="8" style="text-align: center">
  		<input class="btn btn-primary" type="submit" value="영화 추천 받기">
  	</td>
  </tr>
</table>
</form>
</div>
{% include 'includes/footer.html' %}
</div>
</body>
</html>